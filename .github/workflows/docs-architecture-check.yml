name: Docs Architecture Compliance

on:
  pull_request:
    paths:
      - 'docs/**'
      - 'TLDL/**'
  push:
    paths:
      - 'docs/**'
      - 'TLDL/**'

jobs:
  directory-lint:
    runs-on: ubuntu-latest
    name: Check TLDL vs Docs Architecture
    
    steps:
      - name: Checkout
        uses: actions/checkout@ff7abcd0c3c05ccf6adc123a8cd1fd4fb30fb493 # v5
        
      - name: Setup Python
        uses: actions/setup-python@9322b3ca74000aeb2c01eb777b646334015ddd72 # v5.6.0
        with:
          python-version: '3.11'
          
      - name: Run Directory Structure Lint
        run: |
          python3 scripts/directory_lint.py
          
      - name: Architecture Compliance Check
        if: failure()
        run: |
          echo "‚ùå Architecture violation detected!"
          echo ""
          echo "üìã Docs Architecture Rules:"
          echo "  ‚Ä¢ TLDL entries (TLDL-YYYY-MM-DD-*.md) belong in TLDL/entries/"
          echo "  ‚Ä¢ Evergreen docs (guides, references) belong in docs/"
          echo "  ‚Ä¢ Templates belong in templates/"
          echo ""
          echo "üîß To fix:"
          echo "  ‚Ä¢ Move TLDL entries: mv docs/TLDL-*.md TLDL/entries/"
          echo "  ‚Ä¢ Move templates: mv *.md templates/tldl/"
          echo "  ‚Ä¢ Re-run: python3 scripts/directory_lint.py"
          exit 1